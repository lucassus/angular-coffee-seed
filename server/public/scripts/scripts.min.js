(function(){var a,b;b=angular.module("myApp.alerts",["myApp.templates"]),a=function(){function a(a,b){this.$scope=a,this.alerts=b,this.$scope.alertMessages=this.alerts.messages,this.$scope.disposeAlert=function(a){return function(b){return a.alerts.dispose(b)}}(this)}return a.$inject=["$scope","alerts"],a}(),b.controller("alerts",a),b.factory("alerts",["$log","$timeout","alertTimeout",function(a,b,c){return{lastId:0,messages:[],nextId:function(){return this.lastId+=1},push:function(b,c){var d;return d=this.nextId(),a.info("Alert ["+d+", "+b+"]",c),this.messages.push({id:d,type:b,text:c}),this.delayedDispose(d),d},info:function(a){return this.push("info",a)},success:function(a){return this.push("success",a)},warning:function(a){return this.push("warning",a)},error:function(a){return this.push("error",a)},dispose:function(a){var b;return b=this.messages.map(function(a){return a.id}).indexOf(a),this.messages.splice(b,1)},delayedDispose:function(d){var e;return null!=c&&c>0?(e=function(b){return function(){return a.info("Disposing alert",d,"after",c,"milliseconds"),b.dispose(d)}}(this),b(e,c)):void 0}}}]),b.directive("alerts",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/partials/alerts.html",replace:!0,controller:"alerts"}})}).call(this),function(){var a;a=angular.module("myApp.resources",["ngResource"]),a.factory("Products",["$resource",function(a){var b;return b=a("/api/products/:id.json",{id:"@id"},{query:{method:"GET",isArray:!0},get:{method:"GET"}}),angular.extend(b.prototype,{persisted:function(){return!!this.id},priceWithDiscount:function(){return this.hasDiscount()?this.price*(1-this.discount/100):this.price},hasDiscount:function(){return null!=this.discount&&this.discount>0}}),b}])}.call(this),function(){var a;a=angular.module("myApp.forms",["ngMessages"]),a.directive("mySubmit",["$parse","$log",function(a,b){return{require:"form",compile:function(c,d){var e;return e=a(d.mySubmit),function(a,c,d,f){return c.on("submit",function(c){return b.debug("Submitting the form '"+f.$name+"'",f),a.$apply(function(){return f.$valid&&e(a,{$event:c}),f.$submitted=!0})})}}}}]),a.directive("myMessages",[function(){return{scope:!0,replace:!0,transclude:!0,require:"^form",link:function(a,b,c,d){var e;return e=d[c.myMessages],a.touched=function(){return d.$submitted||e.$dirty},a.messages=function(){return e.$error}},template:'<div ng-show="touched()"\n     ng-messages="messages()"\n     ng-transclude></div>'}}]),a.directive("myErrorFor",[function(){return{restrict:"A",scope:!0,replace:!0,transclude:!0,require:"^form",link:function(a,b,c,d){var e,f;return e=d[c.myErrorFor],f=function(){return d.$submitted||e.$dirty},a.hasError=function(){return f()&&e.$invalid},a.hasSuccess=function(){return f()&&e.$valid}},template:"<div ng-class=\"{'has-error': hasError(), 'has-success': hasSuccess()}\"\n     ng-transclude></div>"}}])}.call(this),angular.module("myApp.templates",[]).run(["$templateCache",function(a){"use strict";a.put("templates/other.html",'<div class="page-header"><h2>Other Controller</h2></div><p class="lead">This is a simple list of phones</p>{{other.name}}<div><button class="btn btn-info" ng-click="other.sayHello()"><i class="fa fa-info"></i> Say hello!</button></div>'),a.put("templates/partials/alerts.html",'<aside id="alerts"><div ng-repeat="message in alertMessages" class="alert alert-{{message.type}}"><button ng-click="disposeAlert(message.id)" type="button" class="close">Ã—</button> <strong>{{message.type}}</strong> <span>{{message.text}}</span></div></aside>'),a.put("templates/products/form.html",'<div class="page-header"><h2>Product form</h2></div><form name="productForm" class="form-horizontal" my-submit="form.save(product)" novalidate><div class="form-group" my-error-for="name"><label for="product-name" class="col-lg-2 control-label">Name</label><div class="col-lg-6"><input id="product-name" type="text" class="form-control" placeholder="Enter name" autocomplete="off" name="name" ng-model="product.name" ng-required="true" ng-minlength="3"><div my-messages="name"><span class="help-block" ng-message="required">Name is required</span> <span class="help-block" ng-message="minlength">Name is too short</span></div></div></div><div class="form-group"><div class="col-lg-2"></div><div class="col-lg-2" my-error-for="price"><label for="product-price" class="control-label">Price</label><div class="input-group"><span class="input-group-addon">$</span><input id="product-price" type="text" class="form-control" placeholder="Enter price" name="price" ng-model="product.price" ng-required="true" min="0.01"></div><div my-messages="price"><span class="help-block" ng-message="required">Price is required</span> <span class="help-block" ng-message="min">Minimum price is $0.01</span></div></div><div class="col-lg-2" my-error-for="discount"><label for="product-discount" class="control-label">Discount</label><div class="input-group"><input id="product-discount" type="text" class="form-control" placeholder="Enter discount" name="discount" ng-model="product.discount" min="0" max="100"><span class="input-group-addon">%</span></div><div my-messages="discount"><span class="help-block" ng-message="min">Minimum value is 0</span> <span class="help-block" ng-message="max">Maximum value is 100</span></div></div><div class="col-lg-2" ng-show="product.hasDiscount()"><label class="control-label">Price with discount</label><div class="input-group"><span class="input-group-addon">$</span><input type="text" disabled class="form-control" value="{{product.priceWithDiscount() | currency:\'\'}}"></div></div></div><div class="form-group"><label for="product-description" class="col-lg-2 control-label">Description</label><div class="col-lg-6"><textarea name="description" ng-model="product.description" class="form-control" id="product-description" rows="5"></textarea></div></div><div class="form-group"><div class="col-lg-offset-2 col-lg-6"><button type="submit" class="btn btn-success"><span ng-hide="product.persisted()"><i class="fa fa-plus"></i> Create</span> <span ng-show="product.persisted()"><i class="fa fa-save"></i> Update</span></button> <a href="" class="btn btn-warning" ng-click="form.reset()"><i class="fa fa-eraser"></i> Reset</a> <a href="" class="btn btn-danger" ng-show="product.persisted()" ng-click="form.delete()"><i class="fa fa-trash-o"></i> Delete</a> <a ui-sref="products.list" class="btn btn-default">Cancel</a></div></div></form>'),a.put("templates/products/list.html",'<div class="page-header"><h2>Products list</h2></div><p class="lead">You have {{index.products.length}} products</p><a ui-sref="products.create" class="btn btn-success"><i class="fa fa-plus"></i> Create new product</a><table class="table table-hover products" ng-show="index.products.length > 0"><thead><tr><th>#</th><th>Actions</th><th>Name</th><th>Price</th><th>Discount</th><th>Description</th><th>Created At</th></tr></thead><tbody><tr ng-repeat="product in index.products | orderBy:\'priceWithDiscount()\'" ng-class="{\'success\': product.hasDiscount()}"><td>{{product.id}}</td><td><div class="btn-group"><button type="button" class="btn btn-default btn-small dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li><a ui-sref="products.show.info({id: product.id})"><i class="fa fa-search"></i> Show</a></li><li><a ui-sref="products.edit({id: product.id})"><i class="fa fa-edit"></i> Edit</a></li><li class="divider"></li><li><a href="" ng-click="index.deleteProduct(product)"><i class="fa fa-trash-o"></i> Delete</a></li></ul></div></td><td><a ui-sref="products.show.info({id: product.id})">{{product.name}}</a></td><td>{{product.priceWithDiscount() | currency}}</td><td><span ng-show="product.hasDiscount()">{{product.discount}}%</span> <span ng-hide="product.hasDiscount()">---</span></td><td style="width: 50%">{{product.description}}</td><td style="width: 120px">{{product.createdAt | date}}</td></tr></tbody></table>'),a.put("templates/products/show.html",'<div bindonce="" class="page-header"><h2>Product "<span bo-text="product.name"></span>" details</h2></div><div class="tabbable"><ul class="nav nav-tabs"><li ng-class="{active: $state.includes(\'products.show.info\')}"><a ui-sref="products.show.info">Info</a></li><li ng-class="{active: $state.includes(\'products.show.details\')}"><a ui-sref="products.show.details">Details</a></li><li ng-class="{active: $state.includes(\'products.show.actions\')}"><a ui-sref="products.show.actions">Actions</a></li></ul><div class="tab-content"><hr><div ui-view=""></div></div></div>'),a.put("templates/products/show/actions.html",'<div class="col-lg-offset-2"><a ui-sref="products.edit({id: product.id})" class="btn btn-success"><i class="fa fa-edit"></i> Edit</a> <button ng-click="actions.deleteProduct()" class="btn btn-danger"><i class="fa fa-trash-o"></i> Delete</button></div>'),a.put("templates/products/show/details.html",'<dl bindonce="" class="dl-horizontal"><dt>ID</dt><dd bo-text="product.id"></dd><dt>Headline</dt><dd bo-text="product.headline"></dd><dt>Manufacturer</dt><dd>{{product.manufacturer}}</dd><dt>Created At</dt><dd bo-text="product.createdAt | date"></dd></dl>'),a.put("templates/products/show/info.html",'<dl bindonce="" class="dl-horizontal"><dt>Name</dt><dd>{{product.name}}</dd><dt>Price with discount</dt><dd bo-text="product.priceWithDiscount() | currency"></dd><dt>Description</dt><dd>{{product.description}}</dd></dl>'),a.put("templates/tasks.html",'<div class="page-header"><h2>Tasks List</h2></div><p class="lead">Very simple TODO list</p><span id="remaining">{{tasks.remainingTasksCount()}} of {{tasks.tasksCount()}} remaining</span> [ <a href="" class="archive" ng-click="tasks.archive()">archive</a> ]<ul id="tasks" class="icons-ul"><li ng-repeat="task in tasks.tasks | orderBy:\'done\'" class="repeat-item"><label><input type="checkbox" ng-model="task.done">&nbsp; <span ng-class="{done: task.done}">{{task.name}}</span></label></li></ul><form name="taskForm" ng-submit="tasks.addTask(task)" novalidate><div class="form-group" ng-class="{\'has-error\': taskForm.$submitted && taskForm.name.$invalid}"><label for="new-task-name">Task name</label><input id="new-task-name" type="text" class="form-control" placeholder="Enter task name" name="name" ng-model="task.name" required><span class="help-block" ng-show="taskForm.$submitted && taskForm.name.$error.required">Task name is required</span></div><div class="checkbox"><label><input type="checkbox" name="done" ng-model="task.done">Done</label></div><button type="submit" class="btn btn-primary"><i class="fa fa-plus"></i> Add</button> <button type="button" class="btn" ng-click="tasks.reset()" ng-disabled="taskForm.$pristine"><i class="fa fa-eraser"></i> Reset</button></form>')}]),function(){var a;a=angular.module("myApp",["ngAnimate","ui.router","pasvaz.bindonce","myApp.templates","myApp.alerts","myApp.resources","myApp.forms"]),a.config(["$provide",function(a){var b;return a.value("alertTimeout",3e3),b="9001"===window.location.port,b?a.value("alertTimeout",null):void 0}])}.call(this),function(){var a;a=angular.module("myApp"),a.config(["$stateProvider","$urlRouterProvider",function(a,b){return b.otherwise("/products"),a.state("products",{"abstract":!0,url:"/products",template:"<ui-view/>"}).state("products.list",{url:"",templateUrl:"templates/products/list.html",controller:"products.IndexCtrl as index",resolve:{products:["Products",function(a){return a.query().$promise}]}}).state("products.create",{url:"/create",templateUrl:"templates/products/form.html",controller:"products.FormCtrl as form",resolve:{product:["Products",function(a){return new a}]}}).state("products.edit",{url:"/:id/edit",templateUrl:"templates/products/form.html",controller:"products.FormCtrl as form",resolve:{product:["Products","$stateParams",function(a,b){return a.get({id:b.id}).$promise}]}}).state("products.show",{"abstract":!0,url:"/:id",templateUrl:"templates/products/show.html",controller:"products.ShowCtrl as show",resolve:{product:["Products","$stateParams",function(a,b){return a.get({id:b.id}).$promise}]}}).state("products.show.info",{url:"",templateUrl:"templates/products/show/info.html"}).state("products.show.details",{url:"/details",templateUrl:"templates/products/show/details.html"}).state("products.show.actions",{url:"/actions",templateUrl:"templates/products/show/actions.html",controller:"products.ShowActionsCtrl as actions"}).state("other",{url:"/other",templateUrl:"templates/other.html",controller:"OtherCtrl as other"}).state("tasks",{url:"/tasks",templateUrl:"templates/tasks.html",controller:"TasksCtrl as tasks"})}])}.call(this),function(){var a=[].slice;this.BaseCtrl=function(){function b(){var b,c,d,e,f,g;for(c=1<=arguments.length?a.call(arguments,0):[],g=this.constructor.annotations,d=e=0,f=g.length;f>e;d=++e)b=g[d],this[b.identifier]=c[d];"function"==typeof this.initialize&&this.initialize()}return b.register=function(a,b){var c;return null==b&&(b=this.name||(null!=(c=this.toString().match(/function\s*(.*?)\(/))?c[1]:void 0)),"string"==typeof a&&(a=angular.module(a)),a.controller(b,this)},b.inject=function(){var b,c;return c=1<=arguments.length?a.call(arguments,0):[],b=/^(\S+)(\s+as\s+(\w+))?$/,this.annotations=_.map(c,function(a){var c;return c=a.match(b),{name:c[1],identifier:c[3]||c[1]}}),this.$inject=_.map(this.annotations,function(a){return a.name})},b}()}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=angular.module("myApp"),a=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.register(b,"MainCtrl"),c.inject("$scope","$state","$stateParams"),c.prototype.initialize=function(){return this.$scope.$state=this.$state,this.$scope.$stateParams=this.$stateParams},c}(BaseCtrl)}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=angular.module("myApp"),a=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.register(b,"products.FormCtrl"),c.inject("$scope","$location","alerts","product as remote"),c.prototype.initialize=function(){return this.reset()},c.prototype.save=function(a){var b,c;return b=a.$save(),c=a.persisted()?"Product was updated":"Product was created",b.then(function(a){return function(){return a.alerts.success(c),a.$location.path("/products")}}(this))},c.prototype.reset=function(){return this.product=angular.copy(this.remote),this.$scope.product=this.product},c.prototype["delete"]=function(){var a;return a=this.product.$delete(),a.then(function(a){return function(){return a.alerts.info("Product was deleted"),a.$location.path("/products")}}(this))},c}(BaseCtrl)}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=angular.module("myApp"),a=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.register(b,"products.IndexCtrl"),c.inject("alerts","products"),c.prototype.deleteProduct=function(a){var b;return b=a.$delete(),b.then(function(b){return function(){var c;return c=b.products.indexOf(a),-1!==c&&b.products.splice(c,1),b.alerts.info("Product was deleted")}}(this))},c}(BaseCtrl)}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=angular.module("myApp"),a=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.register(b,"products.ShowCtrl"),c.inject("$scope","product"),c.prototype.initialize=function(){return this.$scope.product=this.product},c}(BaseCtrl)}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=angular.module("myApp"),a=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.register(b,"products.ShowActionsCtrl"),c.inject("$scope","$state","$window","alerts"),c.prototype.deleteProduct=function(){var a;if(this.$window.confirm("Are you sure?"))return a=this.$scope.product.$delete(),a.then(function(a){return function(){return a.alerts.info("Product was deleted"),a.$state.go("products.list")}}(this))},c}(BaseCtrl)}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=angular.module("myApp"),a=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.register(b,"OtherCtrl"),c.inject("alerts"),c.prototype.initialize=function(){return this.name="This is the other controller"},c.prototype.sayHello=function(){return this.alerts.info("Hello World!")},c}(BaseCtrl)}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=angular.module("myApp"),a=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.register(b,"TasksCtrl"),c.inject("$scope"),c.prototype.initialize=function(){return this.tasks=[{name:"First task",done:!1},{name:"Completed task",done:!0},{name:"Second task",done:!1}],this.master={name:"",done:!1},this.reset()},c.prototype.incompleteTasks=function(){var a,b,c,d,e;for(d=this.tasks,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.done||e.push(a);return e},c.prototype.tasksCount=function(){return this.tasks.length},c.prototype.remainingTasksCount=function(){return this.incompleteTasks().length},c.prototype.archive=function(){return this.tasks=this.incompleteTasks()},c.prototype.reset=function(){var a;return this.$scope.task=angular.copy(this.master),a=this.$scope.taskForm,a?(a.$setPristine(),a.$submitted=!1):void 0},c.prototype.addTask=function(a){var b;return b=this.$scope.taskForm,b.$submitted=!0,b.$valid?(this.tasks.push(angular.copy(a)),this.reset()):void 0},c}(BaseCtrl)}.call(this);